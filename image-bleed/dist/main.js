!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n(1);var a=n(3),r=n(4),o=n(5),i=n(9);n(10),n(13),n(14),n(15),n(16),n(17);var u=document.getElementById("content--canvas"),c=document.getElementById("content--canvas__container"),l=u.getContext("2d");l.scale(2,2);var d=document.getElementById("content--info__bleed-height"),s=document.getElementById("content--info__range"),f=document.getElementById("content--info__tip"),g=document.getElementById("header--image__fill"),h=document.getElementById("hidden--image-upload"),p=document.getElementById("content--info__button--save");document.getElementById("content--container").style.display="flex",h.onchange=function(e){(0,r.parseUpload)(e).then(function(e){(0,a.insertImage)(e,u,l,c,s,d,g)})},p.onclick=function(e){(0,o.saveCanvas)(u)};var m=["images/starter-1.png","images/starter-2.png","images/starter-3.png","images/starter-4.png"],v=new Image;function w(){window.matchMedia("(max-width: 760px)").matches?f.innerHTML="Tap to bleed":f.innerHTML="Click to bleed"}v.src=m[Math.floor(Math.random()*m.length)],v.onload=function(){(0,a.insertImage)(v,u,l,c,s,d,g)},w(),window.onresize=function(e){(0,a.insertImage)(a.lastImage,u,l,c,s,d,g),w()},u.addEventListener("click",function(e){var t=(0,a.calculateClickY)(u,e);(0,i.bleedCanvas)(u,l,t,s.value*(0,a.calculateHeightMultiple)(u))}),s.addEventListener("input",function(e){d.innerHTML="Bleed height "+e.target.value})},function(e,t,n){},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateHeightMultiple=a,t.calculateClickY=function(e,t){var n=a(e);return Math.round((t.pageY-e.getBoundingClientRect().top)*n)},t.calculateCanvasSize=r,t.insertImage=function(e,n,a,o,i,u,c){n.height=e.height,n.width=e.width;var l=r(n,o);n.style.height=l.height+"px",n.style.width=l.width+"px",n.height=e.height,n.width=e.width,i.min=1,i.max=l.height,i.value>=l.height&&(i.value=l.height,u.innerHTML="Bleed height "+i.value);a.drawImage(e,0,0),t.lastImage=e;var d=function(e,t){var n=t.getImageData(0,0,e.width,e.height),a=0,r={r:0,g:0,b:0},o=0;for(;(o+=20)<n.data.length;)a+=1,r.r+=n.data[o],r.g+=n.data[o+1],r.b+=n.data[o+2];return r.r=~~(r.r/a),r.g=~~(r.g/a),r.b=~~(r.b/a),r}(n,a);d.r>=240&&d.g>=240&&d.b>=240?c.style.fill=null:c.style.fill="rgb("+d.r+", "+d.g+", "+d.b+")"};t.lastImage=void 0;function a(e){return e.height/parseInt(e.style.height)}function r(e,t){var n=e.height,a=e.width;return e.height=null,e.width=null,e.style.height=null,e.style.width=null,{height:t.offsetHeight,width:Math.round(t.offsetHeight/n*a)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseUpload=function(e){return new Promise(function(t,n){var a=e.target.files,r=new FileReader;r.readAsDataURL(a[0]),r.onload=function(e){var n=new Image;n.src=e.target.result,n.onload=function(){t(n)}}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.saveCanvas=function(e){e.toBlob(function(e){(0,a.saveAs)(e,"image.png")})};var a=n(6)},function(e,t,n){var a,r=r||function(e){"use strict";if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=function(){return e.URL||e.webkitURL||e},n=e.document.createElementNS("http://www.w3.org/1999/xhtml","a"),a="download"in n,r=/constructor/i.test(e.HTMLElement)||e.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent),i=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},u=function(e){setTimeout(function(){"string"==typeof e?t().revokeObjectURL(e):e.remove()},4e4)},c=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},l=function(l,d,s){s||(l=c(l));var f,g=this,h="application/octet-stream"===l.type,p=function(){!function(e,t,n){for(var a=(t=[].concat(t)).length;a--;){var r=e["on"+t[a]];if("function"==typeof r)try{r.call(e,n||e)}catch(e){i(e)}}}(g,"writestart progress write writeend".split(" "))};if(g.readyState=g.INIT,a)return f=t().createObjectURL(l),void setTimeout(function(){n.href=f,n.download=d,function(e){var t=new MouseEvent("click");e.dispatchEvent(t)}(n),p(),u(f),g.readyState=g.DONE});!function(){if((o||h&&r)&&e.FileReader){var n=new FileReader;return n.onloadend=function(){var t=o?n.result:n.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,g.readyState=g.DONE,p()},n.readAsDataURL(l),void(g.readyState=g.INIT)}f||(f=t().createObjectURL(l)),h?e.location.href=f:e.open(f,"_blank")||(e.location.href=f);g.readyState=g.DONE,p(),u(f)}()},d=l.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=c(e)),navigator.msSaveOrOpenBlob(e,t)}:(d.abort=function(){},d.readyState=d.INIT=0,d.WRITING=1,d.DONE=2,d.error=d.onwritestart=d.onprogress=d.onwrite=d.onabort=d.onerror=d.onwriteend=null,function(e,t,n){return new l(e,t||e.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */void 0!==e&&e.exports?e.exports.saveAs=r:null!==n(7)&&null!==n(8)&&(void 0===(a=function(){return r}.call(t,n,t,e))||(e.exports=a))},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bleedCanvas=function(e,t,n,a){var r=t.getImageData(0,n,e.width,1),o=document.createElement("canvas");o.width=e.width,o.height=1;var i=o.getContext("2d");i.scale(2,2),i.putImageData(r,0,0);var u=new Image;u.src=o.toDataURL(),u.onload=function(){t.drawImage(u,0,n,e.width,a)}}},function(e,t,n){},,,function(e,t,n){e.exports=n.p+"images/starter-1.png"},function(e,t,n){e.exports=n.p+"images/starter-2.png"},function(e,t,n){e.exports=n.p+"images/starter-3.png"},function(e,t,n){e.exports=n.p+"images/starter-4.png"},function(e,t,n){e.exports=n.p+"images/banner.png"}]);